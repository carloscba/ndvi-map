<script src="https://maps.googleapis.com/maps/api/js?key= AIzaSyCvzWscengQ1ItOtYVWjldACDm7jBH3o7I &v=3.exp"></script>
<h1>Init</h1>
<div id="map" style="width: 100%; height: 480px;"></div>
<script>

    var initialize = function(mapId, token) {
        
        var eeMapOptions = {
            getTileUrl: function(tile, zoom) {
                var baseUrl = 'https://earthengine.googleapis.com/map';
                var url = [baseUrl, mapId, zoom, tile.x, tile.y].join('/');
                url += '?token=' + token;
                return url;
            },
            tileSize: new google.maps.Size(256, 256)
        };
        
        var mapType = new google.maps.ImageMapType(eeMapOptions);
        console.log(eeMapOptions);

        var myLatLng = new google.maps.LatLng(-31.464982360950497, -64.4309949874878);
        var mapOptions = {
            center: myLatLng,
            zoom: 14,
            streetViewControl: false
        };        

        var map = new google.maps.Map(document.getElementById('map'), mapOptions);

        map.overlayMapTypes.push(mapType);        
    }

    initialize('{{mapid}}', '{{token}}');
</script>